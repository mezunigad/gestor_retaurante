<!doctype html>
<html><head><meta charset="utf-8"><title>Productos</title><link rel="stylesheet" href="/static/style.css">
  <style>
    .logo-container {
      text-align: center;
      margin-bottom: 20px;
    }
    .logo {
      max-width: 150px;
      height: auto;
      margin-bottom: 10px;
    }
    .header-title {
      margin: 0;
      color: #333;
      font-size: 2em;
    }
  </style>
</head><body>
<header>
  <div class="logo-container">
    <img src="/static/logo.png" alt="Logo Epicuro" class="logo">
    <h1 class="header-title">Epicuro - Productos</h1>
  </div>
</header>
<!-- ... resto del código ... -->
<main>
  <p><a href="/">Volver</a> · <a href="/orders">Nueva Comanda</a></p>
  <section>
    <h2>Agregar / Actualizar producto</h2>
    <form method="post">
      <label>Nombre: <input name="name" required></label><br>
      <label>Categoria:
        <select name="category">
          <option value="SANDWICH">SANDWICH</option>
          <option value="COMPLETO">COMPLETO</option>
          <option value="BEBIDA">BEBIDA</option>
          <option value="ENERGÉTICA">ENERGÉTICA</option>
          <option value="JUGO">JUGO</option>
          <option value="CAFETERÍA">CAFETERÍA</option> <!-- Nueva categoría añadida -->
        </select>
      </label><br>
      <label id="proteinLabel">Proteína base: <input name="base_protein" placeholder="Ej: Churrasco, Lomito, Pollo, —"></label><br>
      <label>Precio (CLP): <input name="price" type="number" value="10000" required></label><br>
      <label>Costo materia prima (CLP): <input name="cost" type="number" value="3000" required></label><br>
      <button type="submit">Guardar</button>
    </form>
  </section>
  <section>
    <h2>Lista de productos</h2>
    <table border="0" cellpadding="6">
      <tr><th>Nombre</th><th>Categoria</th><th>Proteína</th><th>Precio</th><th>Costo</th><th>Acciones</th></tr>
      {% for p in products %}
      <tr>
        <td>{{p.name}}</td>
        <td>{{p.category}}</td>
        <td>
          {% if p.category in ['BEBIDA', 'ENERGÉTICA', 'JUGO', 'CAFETERÍA'] %}
            —
          {% else %}
            {{p.base_protein}}
          {% endif %}
        </td>
        <td>${{p.price}}</td>
        <td>${{p.cost}}</td>
        <td>
          <a href="/products/{{p.id}}/edit">Editar</a>
          <form method="post" action="/products/{{p.id}}/delete" style="display: inline;">
            <button type="submit" onclick="return confirm('¿Estás seguro de que quieres eliminar {{p.name}}?')" 
                    style="color: red; margin-left: 10px; border: none; background: none; cursor: pointer; text-decoration: underline;">
              Eliminar
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </table>
  </section>
</main>

<script>
// Ocultar/mostrar campo de proteína según la categoría
function toggleProteinField() {
    const category = document.querySelector('select[name="category"]').value;
    const proteinLabel = document.getElementById('proteinLabel');
    
    if (['BEBIDA', 'ENERGÉTICA', 'JUGO', 'CAFETERÍA'].includes(category)) {
        proteinLabel.style.display = 'none';
    } else {
        proteinLabel.style.display = 'block';
    }
}

// Inicializar y agregar event listener
document.querySelector('select[name="category"]').addEventListener('change', toggleProteinField);
toggleProteinField(); // Ejecutar al cargar la página
</script>
</body></html>